<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quote Calculator Test - OVERSEACE HITECH</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Responsive text utilities */
        .text-responsive {
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
        }

        /* Mobile optimizations */
        @media (max-width: 640px) {
            .mobile-padding {
                padding: 1rem;
            }

            .mobile-text-sm {
                font-size: 0.875rem;
                line-height: 1.4;
            }

            .mobile-gap {
                gap: 1rem;
            }
        }

        @media (max-width: 480px) {
            .mobile-text-xs {
                font-size: 0.75rem;
                line-height: 1.3;
            }
        }
    </style>
</head>
<body class="bg-gray-100 p-4 sm:p-6 lg:p-8">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-blue-800 mb-6 sm:mb-8 text-center text-responsive">Quote Calculator Test</h1>

        <!-- Test Scenarios -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 lg:gap-8 mb-6 sm:mb-8">
            <div class="bg-white p-4 sm:p-6 rounded-lg shadow-lg">
                <h3 class="text-lg sm:text-xl font-bold text-blue-800 mb-3 sm:mb-4 text-responsive">Test Scenario 1: Standard Cargo</h3>
                <div class="space-y-2 text-xs sm:text-sm">
                    <p class="text-responsive"><strong>Service:</strong> Transportation (1,000,000TSH base)</p>
                    <p class="text-responsive"><strong>Weight:</strong> 500 kg</p>
                    <p class="text-responsive"><strong>Distance:</strong> 1200 km</p>
                    <p class="text-responsive"><strong>Cargo Type:</strong> General Cargo (1.0x)</p>
                    <p class="text-responsive"><strong>Timeline:</strong> Within a week (1.2x)</p>
                </div>
                <button onclick="testScenario1()" class="mt-3 sm:mt-4 bg-blue-600 text-white px-3 sm:px-4 py-2 rounded hover:bg-blue-700 text-sm sm:text-base w-full sm:w-auto">
                    Calculate Test 1
                </button>
                <div id="result1" class="mt-3 sm:mt-4 p-3 bg-blue-50 rounded hidden text-xs sm:text-sm"></div>
            </div>

            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h3 class="text-xl font-bold text-blue-800 mb-4">Test Scenario 2: Urgent Hazardous</h3>
                <div class="space-y-2 text-sm">
                    <p><strong>Service:</strong> Freight Forwarding (800,000TSH base)</p>
                    <p><strong>Weight:</strong> 200 kg</p>
                    <p><strong>Distance:</strong> 800 km</p>
                    <p><strong>Cargo Type:</strong> Hazardous Materials (1.5x)</p>
                    <p><strong>Timeline:</strong> Urgent (2.0x)</p>
                </div>
                <button onclick="testScenario2()" class="mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
                    Calculate Test 2
                </button>
                <div id="result2" class="mt-4 p-3 bg-red-50 rounded hidden"></div>
            </div>
        </div>

        <!-- Manual Calculator -->
        <div class="bg-white p-6 rounded-lg shadow-lg">
            <h3 class="text-xl font-bold text-blue-800 mb-4">Manual Calculator Test</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Services (Multiple Selection)</label>
                    <div class="border rounded p-2 max-h-32 overflow-y-auto bg-gray-50">
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" value="500000" class="service-checkbox mr-2">
                                <span class="text-sm">Customs Clearing (500,000TSH)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" value="800000" class="service-checkbox mr-2">
                                <span class="text-sm">Freight Forwarding (800,000TSH)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" value="300000" class="service-checkbox mr-2">
                                <span class="text-sm">Warehousing (300,000TSH)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" value="1000000" class="service-checkbox mr-2">
                                <span class="text-sm">Transportation (1,000,000TSH)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" value="600000" class="service-checkbox mr-2">
                                <span class="text-sm">Logistics Consulting (600,000TSH)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" value="1200000" class="service-checkbox mr-2">
                                <span class="text-sm">Supply Chain Management (1,200,000TSH)</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Weight (kg)</label>
                    <input type="number" id="test-weight" class="w-full p-2 border rounded" placeholder="500">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Distance (km)</label>
                    <input type="number" id="test-distance" class="w-full p-2 border rounded" placeholder="1200">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Cargo Type</label>
                    <select id="test-cargo" class="w-full p-2 border rounded">
                        <option value="1.0">General Cargo (1.0x)</option>
                        <option value="1.5">Hazardous Materials (1.5x)</option>
                        <option value="1.3">Perishable Goods (1.3x)</option>
                        <option value="2.0">Oversized/Heavy Cargo (2.0x)</option>
                        <option value="1.2">Containers (1.2x)</option>
                        <option value="1.4">Vehicles (1.4x)</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Timeline</label>
                    <select id="test-timeline" class="w-full p-2 border rounded">
                        <option value="2.0">Urgent (2.0x)</option>
                        <option value="1.5">ASAP (1.5x)</option>
                        <option value="1.2">Within a week (1.2x)</option>
                        <option value="1.0">Within a month (1.0x)</option>
                        <option value="0.9">Flexible (0.9x)</option>
                    </select>
                </div>
                <div class="flex items-end">
                    <button onclick="calculateManual()" class="w-full bg-green-600 text-white p-2 rounded hover:bg-green-700">
                        Calculate
                    </button>
                </div>
            </div>
            <div id="manual-result" class="mt-6 p-4 bg-green-50 rounded hidden">
                <h4 class="font-bold text-green-800 mb-3">Calculation Breakdown</h4>
                <div id="breakdown" class="space-y-2 text-sm"></div>
            </div>
        </div>

        <!-- Formula Explanation -->
        <div class="bg-blue-50 p-6 rounded-lg shadow-lg mt-8">
            <h3 class="text-xl font-bold text-blue-800 mb-4">Pricing Formula</h3>
            <div class="text-sm space-y-2">
                <p><strong>Base Calculation:</strong></p>
                <p class="ml-4">Base Service Fee + Weight Factor + Distance Factor</p>
                <p><strong>Weight Factor:</strong> (Weight ÷ 100) × 50,000TSH per 100kg</p>
                <p><strong>Distance Factor:</strong> (Distance ÷ 100) × 30,000TSH per 100km</p>
                <p><strong>Final Price:</strong> Base Calculation × Cargo Multiplier × Timeline Multiplier</p>
            </div>
        </div>
    </div>

    <script>
        function calculateQuote(basePrice, weight, distance, cargoMultiplier, timelineMultiplier) {
            const weightFactor = Math.ceil(weight / 100) * 50000;
            const distanceFactor = Math.ceil(distance / 100) * 30000;
            const subtotal = basePrice + weightFactor + distanceFactor;
            const total = subtotal * cargoMultiplier * timelineMultiplier;

            return {
                basePrice,
                weightFactor,
                distanceFactor,
                subtotal,
                cargoMultiplier,
                timelineMultiplier,
                total
            };
        }

        function displayResult(elementId, result, scenario) {
            const element = document.getElementById(elementId);
            element.innerHTML = `
                <h4 class="font-bold mb-2">${scenario} Result</h4>
                <div class="space-y-1 text-sm">
                    <p>Base Service: ${Math.round(result.basePrice).toLocaleString()}TSH</p>
                    <p>Weight Factor: ${Math.round(result.weightFactor).toLocaleString()}TSH</p>
                    <p>Distance Factor: ${Math.round(result.distanceFactor).toLocaleString()}TSH</p>
                    <p>Subtotal: ${Math.round(result.subtotal).toLocaleString()}TSH</p>
                    <p>Cargo Multiplier: ${result.cargoMultiplier}x</p>
                    <p>Timeline Multiplier: ${result.timelineMultiplier}x</p>
                    <p class="font-bold text-lg border-t pt-2">Total: ${Math.round(result.total).toLocaleString()}TSH</p>
                </div>
            `;
            element.classList.remove('hidden');
        }

        function testScenario1() {
            const result = calculateQuote(1000000, 500, 1200, 1.0, 1.2);
            displayResult('result1', result, 'Standard Cargo');
        }

        function testScenario2() {
            const result = calculateQuote(800000, 200, 800, 1.5, 2.0);
            displayResult('result2', result, 'Urgent Hazardous');
        }

        function calculateManual() {
            const selectedServices = document.querySelectorAll('.service-checkbox:checked');
            const weight = parseFloat(document.getElementById('test-weight').value) || 0;
            const distance = parseFloat(document.getElementById('test-distance').value) || 0;
            const cargoMultiplier = parseFloat(document.getElementById('test-cargo').value);
            const timelineMultiplier = parseFloat(document.getElementById('test-timeline').value);

            if (selectedServices.length === 0) {
                alert('Please select at least one service');
                return;
            }

            if (!weight || !distance) {
                alert('Please enter weight and distance');
                return;
            }

            // Calculate combined base price
            let basePrice = 0;
            let serviceNames = [];
            selectedServices.forEach(service => {
                basePrice += parseFloat(service.value);
                serviceNames.push(service.nextElementSibling.textContent.split(' (')[0]);
            });

            const result = calculateQuote(basePrice, weight, distance, cargoMultiplier, timelineMultiplier);

            document.getElementById('breakdown').innerHTML = `
                <p>Selected Services: ${serviceNames.join(', ')}</p>
                <p>Combined Base Service Fee: ${Math.round(result.basePrice).toLocaleString()}TSH</p>
                <p>Weight Factor: (${weight} ÷ 100) × 50,000TSH = ${Math.round(result.weightFactor).toLocaleString()}TSH</p>
                <p>Distance Factor: (${distance} ÷ 100) × 30,000TSH = ${Math.round(result.distanceFactor).toLocaleString()}TSH</p>
                <p>Subtotal: ${Math.round(result.subtotal).toLocaleString()}TSH</p>
                <p>Cargo Multiplier: ${result.cargoMultiplier}x</p>
                <p>Timeline Multiplier: ${result.timelineMultiplier}x</p>
                <p class="font-bold text-lg border-t pt-2 mt-2">Final Total: ${Math.round(result.total).toLocaleString()}TSH</p>
            `;

            document.getElementById('manual-result').classList.remove('hidden');
        }
    </script>
</body>
</html>
